<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recibos Universidad Surcolombiana</title>
  <style>
    body {
      font-family: Arial, Helvetica, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f4f4f4;
    }

    .recibo {
      background: white;
      border: 1px solid #000;
      padding: 10px 20px;
      margin-bottom: 10px;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      border-bottom: 1px solid #000;
      padding-bottom: 5px;
      margin-bottom: 8px;
    }

    .logo {
      width: 70px;
      margin-right: 10px;
    }

    .btn-pdf {
      display: inline-block;
      margin-top: 6px;
      padding: 6px 10px;
      background: #0b66c3;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 12px;
    }

    .btn-pdf:active {
      transform: translateY(1px);
    }

    .universidad {
      display: flex;
      align-items: center;
    }

    .info {
      font-size: 12px;
      line-height: 1.3;
    }

    .titulo {
      font-weight: bold;
      text-transform: uppercase;
      font-size: 14px;
    }

    .fecha-ref {
      text-align: right;
      font-size: 13px;
    }

    .referencia {
      font-weight: bold;
      color: #b40000;
      font-size: 18px;
    }

    table {
      width: 100%;
      font-size: 12px;
      border-collapse: collapse;
      margin-bottom: 8px;
    }

    td {
      padding: 2px 0;
      vertical-align: top;
    }

    .conceptos {
      border-top: 1px solid #000;
      margin-top: 6px;
      padding-top: 4px;
    }

    .conceptos table {
      width: 100%;
      border-collapse: collapse;
    }

    .conceptos td {
      border: 1px solid #000;
      padding: 5px;
    }

    .conceptos td:nth-child(1) {
      width: 80%;
    }

    .conceptos td:nth-child(2) {
      width: 20%;
      text-align: right;
    }

    .barcode {
      display: block;
      width: 100%;
      margin: 8px 0;
      background: transparent;
      /* will be replaced by SVG */
      height: 90px;
      /* increased so bars render taller */
      border-radius: 2px;
    }

    .barcode svg {
      width: 100%;
      height: 100%;
      display: block;
    }

    .barcode .ref-text {
      font-size: 12px;
      fill: #222;
      font-family: Arial, Helvetica, sans-serif;
    }

    .codigo {
      text-align: center;
      font-size: 11px;
      word-wrap: break-word;
    }

    .pague {
      margin-top: 6px;
      font-size: 12px;
      display: flex;
      justify-content: space-between;
    }

    .perforacion {
      border-top: 1px dashed #000;
      margin: 10px 0;
    }
  </style>
</head>

<body>

  <!-- RECIBO 1 -->
  <div class="recibo">
    <div class="header">
      <div class="universidad">
        <img src="./8075ce-uc.jpg" alt="Logo USCO" class="logo">
        <div class="info">
          <div class="titulo">UNIVERSIDAD COOPERATIVA DE COLOMBIA</div>
          <div>NIT. 860.029.924-7</div>
          <div>Vigilada Mineducaci贸n</div>
        </div>
      </div>
      <div class="fecha-ref">
        <div>Fecha: 01/11/2025</div>
        <div>Referencia: <span class="referencia">01928796</span></div>
      </div>
    </div>

    <table>
      <tr>
        <td><strong>ID.:</strong></td>
        <td>1.003.813.569</td>
      </tr>
      <tr>
        <td><strong>Nombre.:</strong></td>
        <td>DANIEL VASQUEZ DUSSAN</td>
      </tr>
      <tr>
        <td><strong>PROGRAMA:</strong></td>
        <td>DERECHO</td>
      </tr>
      <tr>
        <td><strong>CUOTA:</strong></td>
        <td>1</td>
      </tr>
    </table>

    <div class="conceptos">
      <table>
        <tr>
          <td>Recaudo Abono Pago Semestre 2025</td>
          <td>$813.000</td>
        </tr>
        <tr>
          <td><strong>TOTAL A PAGAR:</strong></td>
          <td><strong>$813.000</strong></td>
        </tr>
      </table>
    </div>

    <div class="barcode"></div>
    <div class="codigo">(415)7707290762096(8020)01928796(3900)0000160000(95)20240827</div>

    <div class="pague">
      <div><strong>Bancos habilitados:</strong> BANCOLOMBIA 912-797840-44, NEQUI 3197626008</div>
    </div>
  </div>

  <div class="perforacion"></div>

  <!-- RECIBO 2 -->
  <div class="recibo">
    <div class="header">
      <div class="universidad">
        <img src="./8075ce-uc.jpg" alt="Logo USCO" class="logo">
        <div class="info">
          <div class="titulo">UNIVERSIDAD COOPERATIVA DE COLOMBIA</div>
          <div>NIT. 860.029.924-7</div>
          <div>Vigilada Mineducaci贸n</div>
        </div>
      </div>
      <div class="fecha-ref">
        <div>Fecha: 01/11/2025</div>
        <div>Referencia: <span class="referencia">01928796</span></div>
      </div>
    </div>

    <table>
      <tr>
        <td><strong>ID.:</strong></td>
        <td>1.003.813.569</td>
      </tr>
      <tr>
        <td><strong>Nombre.:</strong></td>
        <td>DANIEL VASQUEZ DUSSAN</td>
      </tr>
      <tr>
        <td><strong>PROGRAMA:</strong></td>
        <td>DERECHO</td>
      </tr>
      <tr>
        <td><strong>CUOTA:</strong></td>
        <td>1</td>
      </tr>
    </table>

    <div class="conceptos">
      <table>
        <tr>
          <td>Recaudo Abono Pago Semestre 2025</td>
          <td>$813.000</td>
        </tr>
        <tr>
          <td><strong>TOTAL A PAGAR:</strong></td>
          <td><strong>$813.000</strong></td>
        </tr>
      </table>
    </div>

    <div class="barcode"></div>
    <div class="codigo">(415)7707290762096(8020)01928796(3900)0000160000(95)20240827</div>

    <div class="pague">
      <div><strong>Bancos habilitados:</strong> BANCOLOMBIA 912-797840-44, NEQUI 3197626008</div>
    </div>
  </div>

  <div class="perforacion"></div>

  <!-- RECIBO 3 -->
  <div class="recibo">
    <div class="header">
      <div class="universidad">
        <img src="./8075ce-uc.jpg" alt="Logo USCO" class="logo">
        <div class="info">
          <div class="titulo">UNIVERSIDAD COOPERATIVA DE COLOMBIA</div>
          <div>NIT. 860.029.924-7</div>
          <div>Vigilada Mineducaci贸n</div>
        </div>
      </div>
      <div class="fecha-ref">
        <div>Fecha: 01/11/2025</div>
        <div>Referencia: <span class="referencia">01928796</span></div>
      </div>
    </div>

    <table>
      <tr>
        <td><strong>ID.:</strong></td>
        <td>1.003.813.569</td>
      </tr>
      <tr>
        <td><strong>Nombre.:</strong></td>
        <td>DANIEL VASQUEZ DUSSAN</td>
      </tr>
      <tr>
        <td><strong>PROGRAMA:</strong></td>
        <td>DERECHO</td>
      </tr>
      <tr>
        <td><strong>CUOTA:</strong></td>
        <td>1</td>
      </tr>
    </table>

    <div class="conceptos">
      <table>
        <tr>
          <td>Recaudo Abono Pago Semestre 2025</td>
          <td>$813.000</td>
        </tr>
        <tr>
          <td><strong>TOTAL A PAGAR:</strong></td>
          <td><strong>$813.000</strong></td>
        </tr>
      </table>
    </div>

    <div class="barcode"></div>
    <div class="codigo">(415)7707290762096(8020)01928796(3900)0000160000(95)20240827</div>

    <div class="pague">
      <div><strong>Bancos habilitados:</strong> BANCOLOMBIA 912-797840-44, NEQUI 3197626008</div>
    </div>
  </div>

  <script>
    // Generador simple de barras para mejorar la apariencia del 'barcode'
    (function () {
      function seedFromString(s) {
        var h = 2166136261 >>> 0;
        for (var i = 0; i < s.length; i++) {
          h ^= s.charCodeAt(i);
          h = Math.imul(h, 16777619) >>> 0;
        }
        return h >>> 0;
      }

      function random(seed) {
        // simple LCG
        seed = (seed * 1664525 + 1013904223) >>> 0;
        return [seed, seed / 4294967296];
      }

      function buildPattern(ref) {
        var seed = seedFromString(ref || '0');
        var bars = [];
        // generate more segments to create denser (closer) bars
        var segments = 160; // increase segment count
        for (var i = 0; i < segments; i++) {
          var pair = random(seed);
          seed = pair[0];
          var r = pair[1];
          // width unit mostly 1, sometimes 2 -> lines closer
          var w = 1 + Math.floor(r * 1.2); // results in 1..2
          bars.push(w);
        }
        return bars;
      }

      function renderBarcode(container, ref) {
        var bars = buildPattern(ref);
        var svgW = 1000;
        // prefer the actual container height so bars fill more vertical space
        var clientH = container.clientHeight || 60;
        var svgH = Math.max(40, Math.round(clientH));
        var totalUnits = bars.reduce(function (a, b) { return a + b; }, 0);
        var unit = svgW / totalUnits;

        var xmlns = 'http://www.w3.org/2000/svg';
        var svg = document.createElementNS(xmlns, 'svg');
        svg.setAttribute('viewBox', '0 0 ' + svgW + ' ' + svgH);
        svg.setAttribute('role', 'img');
        svg.setAttribute('aria-label', 'C贸digo de barras ' + ref);

        var x = 0;
        for (var i = 0; i < bars.length; i++) {
          var w = bars[i] * unit;
          // draw only on even indexes (bars), leave gaps on odd
          if (i % 2 === 0) {
            var rect = document.createElementNS(xmlns, 'rect');
            rect.setAttribute('x', x.toFixed(2));
            rect.setAttribute('y', 0);
            rect.setAttribute('width', Math.max(1, w).toFixed(2));
            // make bars nearly full height, leaving a small margin for the reference text
            rect.setAttribute('height', Math.max(12, svgH - 14));
            rect.setAttribute('fill', '#111');
            svg.appendChild(rect);
          }
          x += w;
        }

        // add reference text centered at bottom
        var text = document.createElementNS(xmlns, 'text');
        text.setAttribute('x', svgW / 2);
        text.setAttribute('y', svgH - 4);
        text.setAttribute('text-anchor', 'middle');
        text.setAttribute('class', 'ref-text');
        // set font-size relative to svg height for better scaling
        text.setAttribute('font-size', Math.max(10, Math.round(svgH * 0.13)));
        text.textContent = ref;
        svg.appendChild(text);

        // clear container and append svg
        container.innerHTML = '';
        container.appendChild(svg);
      }

      document.addEventListener('DOMContentLoaded', function () {
        var recibos = document.querySelectorAll('.recibo');
        recibos.forEach(function (recibo) {
          // prefer explicit .referencia span if present
          var refSpan = recibo.querySelector('.referencia');
          var refText = refSpan ? refSpan.textContent.trim() : null;
          if (!refText) {
            var refElem = Array.from(recibo.querySelectorAll('td')).find(function (td) {
              return td.textContent && td.textContent.toLowerCase().includes('referencia');
            });
            refText = refElem ? refElem.nextElementSibling && refElem.nextElementSibling.textContent.trim() : '0000';
          }
          var barcodeContainer = recibo.querySelector('.barcode');
          if (barcodeContainer) {
            renderBarcode(barcodeContainer, refText);
          }
        });
      });
    })();
  </script>

  <!-- html2pdf (bundled) from CDN - used to export a single receipt to PDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <script>
    // Attach click handlers to PDF buttons
    document.addEventListener('DOMContentLoaded', function () {
      var buttons = document.querySelectorAll('.btn-pdf');
      buttons.forEach(function (btn) {
        btn.addEventListener('click', function () {
          var recibo = btn.closest('.recibo');
          if (!recibo) return;
          // filename from data attribute or default
          var filename = (btn.dataset && btn.dataset.filename) ? btn.dataset.filename : 'recibo_pago_ucc';
          var opt = {
            margin: 0.25,
            filename: filename + '.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2, useCORS: true },
            jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
          };
          // temporarily ensure white background for PDF
          var originalBg = recibo.style.background;
          recibo.style.background = '#ffffff';
          html2pdf().set(opt).from(recibo).save().then(function () {
            recibo.style.background = originalBg;
          }).catch(function () { recibo.style.background = originalBg; });
        });
      });
    });
  </script>

</body>

</html>